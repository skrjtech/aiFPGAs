module TOP (
    input wire clock, reset
);

    localparam DWIDTH = 32, STREAMS = 4;
    reg [DWIDTH - 1: 0] STREAMA [0: STREAMS - 1];
    reg [DWIDTH - 1: 0] STREAMB [0: STREAMS - 1];
    reg [DWIDTH - 1: 0] INA, INB;
    
    Matrix #(.DWIDTH(DWIDTH)) matrix (.CLOCK(clock), .NRESET(reset), .STREAMA(INA), .STREAMB(INB));

    integer i;
    always @(posedge clock) begin
        INA <= STREAMA[0];
        INB <= STREAMB[0];
        for (i = 0; i < STREAMS - 1; i = i + 1) begin
            STREAMA[i] <= STREAMA[i + 1];
            STREAMB[i] <= STREAMB[i + 1];
        end
        STREAMA[STREAMS - 1] <= {DWIDTH{1'b0}};
        STREAMB[STREAMS - 1] <= {DWIDTH{1'b0}};
    end
    
endmodule
